<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1093px" preserveAspectRatio="none" style="width:860px;height:1093px;background:#FFFFFF;" version="1.1" viewBox="0 0 860 1093" width="860px" zoomAndPan="magnify"><defs/><g><rect fill="#DDD5F3" height="1074.5703" style="stroke:#181818;stroke-width:0.5;" width="642.5" x="205.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114" x="467.25" y="18.0669">Settlements BC</text><rect fill="none" height="205.0625" style="stroke:#000000;stroke-width:1.5;" width="581" x="10" y="120.7266"/><rect fill="none" height="642.1875" style="stroke:#000000;stroke-width:1.5;" width="844" x="10" y="339.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="103.7266" y2="998.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="244.5" x2="244.5" y1="103.7266" y2="998.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="323.5" x2="323.5" y1="103.7266" y2="998.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="520" x2="520" y1="103.7266" y2="998.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="719" x2="719" y1="103.7266" y2="998.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="810" x2="810" y1="103.7266" y2="998.9766"/><rect fill="#93CEFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="20" y="72.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="27" y="92.4248">Central-Ledger</text><rect fill="#93CEFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="20" y="997.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="27" y="1017.9717">Central-Ledger</text><rect fill="#D0BFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="209.5" y="72.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="216.5" y="92.4248">Rest API</text><rect fill="#D0BFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="209.5" y="997.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="216.5" y="1017.9717">Rest API</text><rect fill="#D0BFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="290.5" y="56.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="302.5" y="76.1279">Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="297.5" y="92.4248">Handler</text><rect fill="#D0BFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="290.5" y="997.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="302.5" y="1017.9717">Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="297.5" y="1034.2686">Handler</text><rect fill="#D0BFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="459" y="56.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="466" y="76.1279">Settlements BC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="486.5" y="92.4248">App Logic</text><rect fill="#D0BFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="459" y="997.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="466" y="1017.9717">Settlements BC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="486.5" y="1034.2686">App Logic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="672" y="84.1279">Settlements</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="683" y="100.4248">Database</text><path d="M701,35.1328 C701,25.1328 719,25.1328 719,25.1328 C719,25.1328 737,25.1328 737,35.1328 L737,61.1328 C737,71.1328 719,71.1328 719,71.1328 C719,71.1328 701,71.1328 701,61.1328 L701,35.1328 " fill="#D0BFFF" style="stroke:#181818;stroke-width:1.5;"/><path d="M701,35.1328 C701,45.1328 719,45.1328 719,45.1328 C719,45.1328 737,45.1328 737,35.1328 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="672" y="1010.9717">Settlements</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="683" y="1027.2686">Database</text><path d="M701,1040.5703 C701,1030.5703 719,1030.5703 719,1030.5703 C719,1030.5703 737,1030.5703 737,1040.5703 L737,1066.5703 C737,1076.5703 719,1076.5703 719,1076.5703 C719,1076.5703 701,1076.5703 701,1066.5703 L701,1040.5703 " fill="#D0BFFF" style="stroke:#181818;stroke-width:1.5;"/><path d="M701,1040.5703 C701,1050.5703 719,1050.5703 719,1050.5703 C719,1050.5703 737,1050.5703 737,1040.5703 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#B19CD7" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="776" y="56.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="784" y="76.1279">Ledger</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="783" y="92.4248">Adapter</text><rect fill="#B19CD7" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68" x="776" y="997.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="784" y="1017.9717">Ledger</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="783" y="1034.2686">Adapter</text><path d="M10,120.7266 L264,120.7266 L264,127.8594 L254,137.8594 L10,137.8594 L10,120.7266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="205.0625" style="stroke:#000000;stroke-width:1.5;" width="581" x="10" y="120.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="209" x="25" y="133.7935">1. Publish Cleared Transfers</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="120" y1="158.9922" y2="158.9922"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="120" y1="158.9922" y2="171.9922"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="120" y1="171.9922" y2="171.9922"/><polygon fill="#181818" points="89,167.9922,79,171.9922,89,175.9922,85,171.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="153.9263">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="98" y="153.9263">Prepare transfer</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="120" y1="216.2578" y2="216.2578"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="120" y1="216.2578" y2="229.2578"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="120" y1="229.2578" y2="229.2578"/><polygon fill="#181818" points="89,225.2578,79,229.2578,89,233.2578,85,229.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="203.6255">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="98" y="196.0591">Obtain</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="98" y="211.1919">settlement model</text><polygon fill="#181818" points="312,269.5234,322,273.5234,312,277.5234,316,273.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="78" x2="318" y1="273.5234" y2="273.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="260.8911">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="98" y="253.3247">Fulfil &amp; publish</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="98" y="268.4575">cleared transfers</text><polygon fill="#181818" points="508,313.7891,518,317.7891,508,321.7891,512,317.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324" x2="514" y1="317.7891" y2="317.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="331" y="305.1567">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="344" y="297.5903">Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="344" y="312.7231">published event</text><path d="M10,339.7891 L283,339.7891 L283,346.9219 L273,356.9219 L10,356.9219 L10,339.7891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="642.1875" style="stroke:#000000;stroke-width:1.5;" width="844" x="10" y="339.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="228" x="25" y="352.856">2. Create Settlement Transfers</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="520" x2="562" y1="393.1875" y2="393.1875"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="562" x2="562" y1="393.1875" y2="406.1875"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="521" x2="562" y1="406.1875" y2="406.1875"/><polygon fill="#181818" points="531,402.1875,521,406.1875,531,410.1875,527,406.1875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="527" y="380.5552">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="540" y="372.9888">Validate cleared</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="540" y="388.1216">transfer data</text><polygon fill="#181818" points="531,431.3203,521,435.3203,531,439.3203,527,435.3203" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="707,431.3203,717,435.3203,707,439.3203,711,435.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="713" y1="435.3203" y2="435.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="537" y="430.2544">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="550" y="430.2544">Lookup settlement config</text><polygon fill="#181818" points="89,460.4531,79,464.4531,89,468.4531,85,464.4531" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="508,460.4531,518,464.4531,508,468.4531,512,464.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="83" x2="514" y1="464.4531" y2="464.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="95" y="459.3872">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="108" y="459.3872">Fetch participant settlement config</text><polygon fill="#181818" points="707,504.7188,717,508.7188,707,512.7188,711,508.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="520" x2="713" y1="508.7188" y2="508.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="527" y="496.0864">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="540" y="488.52">Store participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="540" y="503.6528">settlement config</text><polygon fill="#181818" points="531,548.9844,521,552.9844,531,556.9844,527,552.9844" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="707,548.9844,717,552.9844,707,556.9844,711,552.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="713" y1="552.9844" y2="552.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="537" y="540.3521">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="550" y="532.7856">Determine</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="550" y="547.9185">settlement batch</text><polygon fill="#181818" points="798,578.1172,808,582.1172,798,586.1172,802,582.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="520" x2="804" y1="582.1172" y2="582.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="527" y="577.0513">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="540" y="577.0513">Request settlement accounts</text><polygon fill="#181818" points="89,607.25,79,611.25,89,615.25,85,611.25" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="798,607.25,808,611.25,798,615.25,802,611.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="83" x2="804" y1="611.25" y2="611.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="95" y="606.1841">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="108" y="606.1841">Request settlement accounts</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="120" y1="655.5156" y2="655.5156"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="120" y1="655.5156" y2="668.5156"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="120" y1="668.5156" y2="668.5156"/><polygon fill="#181818" points="89,664.5156,79,668.5156,89,672.5156,85,668.5156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="642.8833">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="98" y="635.3169">Create / retrieve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="98" y="650.4497">settlement accounts</text><polygon fill="#181818" points="798,693.6484,808,697.6484,798,701.6484,802,697.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="78" x2="804" y1="697.6484" y2="697.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="85" y="692.5825">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="98" y="692.5825">Return settlement accounts</text><polygon fill="#181818" points="531,722.7813,521,726.7813,531,730.7813,527,726.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="809" y1="726.7813" y2="726.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="537" y="721.7153">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="559" y="721.7153">Return settlement accounts</text><polygon fill="#181818" points="798,751.9141,808,755.9141,798,759.9141,802,755.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="520" x2="804" y1="755.9141" y2="755.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="527" y="750.8481">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="549" y="750.8481">Request settlement transfers</text><polygon fill="#181818" points="89,781.0469,79,785.0469,89,789.0469,85,785.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="83" x2="809" y1="785.0469" y2="785.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="95" y="779.981">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="117" y="779.981">Request settlement transfers</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="120" y1="829.3125" y2="829.3125"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120" x2="120" y1="829.3125" y2="842.3125"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="79" x2="120" y1="842.3125" y2="842.3125"/><polygon fill="#181818" points="89,838.3125,79,842.3125,89,846.3125,85,842.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="85" y="816.6802">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="107" y="809.1138">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="107" y="824.2466">settlement transfers</text><polygon fill="#181818" points="798,867.4453,808,871.4453,798,875.4453,802,871.4453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="78" x2="804" y1="871.4453" y2="871.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="85" y="866.3794">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="107" y="866.3794">Confirm settlement transfers created</text><polygon fill="#181818" points="531,896.5781,521,900.5781,531,904.5781,527,900.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="525" x2="809" y1="900.5781" y2="900.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="537" y="895.5122">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="559" y="895.5122">Confirm settlement transfers</text><polygon fill="#181818" points="335,940.8438,325,944.8438,335,948.8438,331,944.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="329" x2="519" y1="944.8438" y2="944.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="341" y="932.2114">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="363" y="924.645">Return response about</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="363" y="939.7778">settlement transfers</text><polygon fill="#181818" points="89,969.9766,79,973.9766,89,977.9766,85,973.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="83" x2="323" y1="973.9766" y2="973.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="95" y="968.9106">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="117" y="968.9106">Publish response</text><!--MD5=[c001c373118350dc48d7b3c2a773282b]
@startuml Settle_with_Central_Ledger

/'
skinparam TitleFontSize 20
skinparam TitleFontColor #FFFFFF
skinparam titleBorderRoundCorner 10
skinparam titleBorderThickness 6
skinparam titleBorderColor #005B96
skinparam titleBackgroundColor #005B96
title Settlement from \nCentral-Ledger
'/

participant "Central-Ledger" as ext_cl #93CEFF
/'
note over ext_cl
    Clear transactions &
    maintain liquidity balances
end note
'/

box Settlements BC #DDD5F3
    participant "Rest API" as sbc_rest #D0BFFF
    participant "Event \nHandler" as sbc_event #D0BFFF
    participant "Settlements BC\nApp Logic" as sbc_app_logic #D0BFFF
    database "Settlements \nDatabase" as sbc_db #D0BFFF
    participant "Ledger \nAdapter" as sbc_adptr #B19CD7
end box

group 1. Publish Cleared Transfers
autonumber
    ext_cl - -> ext_cl : Prepare transfer
    ext_cl - -> ext_cl : Obtain \nsettlement model
    ext_cl -> sbc_event : Fulfil & publish \ncleared transfers
    sbc_event - -> sbc_app_logic : Consume \npublished event
autonumber
end

group 2. Create Settlement Transfers
    sbc_app_logic - -> sbc_app_logic: Validate cleared \ntransfer data
    sbc_app_logic <- -> sbc_db : Lookup settlement config
    sbc_app_logic <-> ext_cl : Fetch participant settlement config  
    sbc_app_logic - -> sbc_db : Store participant \nsettlement config
    sbc_app_logic <- -> sbc_db : Determine \nsettlement batch
    sbc_app_logic - -> sbc_adptr : Request settlement accounts
    sbc_adptr <-> ext_cl : Request settlement accounts
    ext_cl - -> ext_cl : Create / retrieve \nsettlement accounts
    sbc_adptr <- ext_cl : Return settlement accounts
    sbc_app_logic <- - sbc_adptr : Return settlement accounts
    sbc_app_logic - -> sbc_adptr : Request settlement transfers
    sbc_adptr -> ext_cl : Request settlement transfers
    ext_cl - -> ext_cl : Create \nsettlement transfers
    sbc_adptr <- ext_cl : Confirm settlement transfers created
    sbc_adptr - -> sbc_app_logic : Confirm settlement transfers
    sbc_app_logic - -> sbc_event : Return response about \nsettlement transfers
    ext_cl <- sbc_event  : Publish response
end

@enduml

@startuml Settle_with_Central_Ledger


participant "Central-Ledger" as ext_cl #93CEFF

box Settlements BC #DDD5F3
    participant "Rest API" as sbc_rest #D0BFFF
    participant "Event \nHandler" as sbc_event #D0BFFF
    participant "Settlements BC\nApp Logic" as sbc_app_logic #D0BFFF
    database "Settlements \nDatabase" as sbc_db #D0BFFF
    participant "Ledger \nAdapter" as sbc_adptr #B19CD7
end box

group 1. Publish Cleared Transfers
autonumber
    ext_cl - -> ext_cl : Prepare transfer
    ext_cl - -> ext_cl : Obtain \nsettlement model
    ext_cl -> sbc_event : Fulfil & publish \ncleared transfers
    sbc_event - -> sbc_app_logic : Consume \npublished event
autonumber
end

group 2. Create Settlement Transfers
    sbc_app_logic - -> sbc_app_logic: Validate cleared \ntransfer data
    sbc_app_logic <- -> sbc_db : Lookup settlement config
    sbc_app_logic <-> ext_cl : Fetch participant settlement config  
    sbc_app_logic - -> sbc_db : Store participant \nsettlement config
    sbc_app_logic <- -> sbc_db : Determine \nsettlement batch
    sbc_app_logic - -> sbc_adptr : Request settlement accounts
    sbc_adptr <-> ext_cl : Request settlement accounts
    ext_cl - -> ext_cl : Create / retrieve \nsettlement accounts
    sbc_adptr <- ext_cl : Return settlement accounts
    sbc_app_logic <- - sbc_adptr : Return settlement accounts
    sbc_app_logic - -> sbc_adptr : Request settlement transfers
    sbc_adptr -> ext_cl : Request settlement transfers
    ext_cl - -> ext_cl : Create \nsettlement transfers
    sbc_adptr <- ext_cl : Confirm settlement transfers created
    sbc_adptr - -> sbc_app_logic : Confirm settlement transfers
    sbc_app_logic - -> sbc_event : Return response about \nsettlement transfers
    ext_cl <- sbc_event  : Publish response
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 SAST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>